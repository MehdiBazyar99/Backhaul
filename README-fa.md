# EasyBackhaul: اسکریپت نصب و مدیریت آسان Backhaul

![Version](https://img.shields.io/badge/Version-12.5-blue.svg)
![License](https://img.shields.io/badge/License-AGPL--3.0-brightgreen.svg)
![Maintained](https://img.shields.io/badge/Maintained%3F-yes-green.svg)

[**English Document (نسخه انگلیسی)**](./README.md)

به `EasyBackhaul` خوش آمدید! یک اسکریپت قدرتمند و کاربرپسند برای مدیریت راهکار **[Backhaul](https://github.com/Musixal/Backhaul)**. این ابزار به شما کمک می‌کند تا فرآیندهای نصب، پیکربندی و مدیریت روزانه تونل‌های خود را به ساده‌ترین شکل ممکن انجام دهید.

این اسکریپت که توسط **[@N4Xon (NaxonM)](https://github.com/NaxonM/EasyBackhaul)** توسعه داده شده، یک رابط کاربری منومحور برای مدیریت پروژه اصلی Backhaul (اثر **Musixal**) فراهم می‌کند.

## روش نصب

برای نصب و اجرای اسکریپت، تنها کافیست دستور زیر را در ترمینال خود وارد کنید. توجه داشته باشید که برای اجرای این اسکریپت به دسترسی `root` یا `sudo` نیاز دارید.

```bash
bash <(curl -Ls https://raw.githubusercontent.com/NaxonM/EasyBackhaul/stable/easybackhaul.sh)
````

اسکریپت ابتدا بررسی می‌کند که آیا برنامه اصلی Backhaul نصب شده است یا خیر. در غیر این صورت، جدیدترین نسخه را به صورت خودکار از مخزن رسمی گیت‌هاب دانلود و نصب می‌کند.

-----

## آموزش گام‌به‌گام استفاده از اسکریپت

این راهنما شما را در تمام مراحل راه‌اندازی و مدیریت یک تونل با اسکریپت EasyBackhaul همراهی می‌کند.

### قدم اول: اجرای اسکریپت و مشاهده منوی اصلی

پس از نصب، با اجرای مجدد دستور بالا، منوی اصلی برای شما نمایش داده می‌شود. در این منو، اطلاعات کلی سرور و گزینه‌های اصلی را مشاهده خواهید کرد.

```
      EasyBackhaul Installer & Management Menu (v12.5)
================================================================
  Core by Musixal  |  Installer by @N4Xon
----------------------------------------------------------------
 1. Configure a New Tunnel
 2. Manage Existing Tunnels
 3. Update/Re-install Backhaul Binary
 4. Uninstall EasyBackhaul (Removes binary and ALL configs)
 0. Exit
----------------------------------------------------------------
```

### قدم دوم: ساخت یک تونل جدید (مثال: پیکربندی سرور)

جادوگر نصب، این فرآیند را برای شما بسیار ساده کرده است. بیایید یک تونل از نوع `Server` را با هم پیکربندی کنیم.

1.  در منوی اصلی، گزینه `1` یعنی «Configure a New Tunnel» را انتخاب کنید.
2.  **انتخاب حالت (Mode)**: از شما پرسیده می‌شود که این دستگاه `Server` (پذیرنده اتصال) است یا `Client` (برقرارکننده اتصال). گزینه `1` را برای سرور انتخاب کنید.
3.  **انتخاب پروتکل (Transport)**: پروتکل مورد نظر خود را از لیست انتخاب کنید (مانند `tcp`, `udp`, `wss`, `tcpmux`).
4.  **پیکربندی پایه**:
      * **پورت تونل**: پورتی که سرور Backhaul روی آن به اتصالات گوش می‌دهد. اسکریپت بررسی می‌کند که این پورت در حال استفاده نباشد.
      * **پورت‌های فوروارد شده**: پورت‌های سرویس روی کلاینت که می‌خواهید روی سرور در دسترس باشند (مثال: `80, 443, 2222=22`).
      * **توکن احراز هویت**: یک رمز عبور امن برای شناسایی و تایید اعتبار کلاینت و سرور.
5.  **پیکربندی پیشرفته**: در این مرحله می‌توانید پارامترهای پیشرفته‌تر را تنظیم کنید یا مقادیر پیش‌فرض را بپذیرید.
6.  **تایید نهایی**: خلاصه‌ای از تنظیمات انجام‌شده به شما نمایش داده می‌شود. در صورت صحت، با وارد کردن `y` آن را تایید کنید.
7.  **ایجاد سرویس**: اسکریپت به طور خودکار فایل کانفیگ را ایجاد کرده، یک قانون جدید به فایروال `ufw` (در صورت فعال بودن) اضافه می‌کند و سرویس `systemd` مربوط به تونل را ساخته و فعال می‌نماید.

تونل جدید شما اکنون فعال و آماده پذیرش اتصال از سمت کلاینت است.

### قدم سوم: مدیریت تونل‌های موجود

این بخش، مرکز کنترل تمام تونل‌های شماست.

1.  در منوی اصلی، گزینه `2` یعنی «Manage Existing Tunnels» را انتخاب کنید.
2.  **لیست سرویس‌ها**: لیستی از تمام سرویس‌های Backhaul به همراه وضعیت آن‌ها (`Active` یا `Inactive`) نمایش داده می‌شود.
3.  **انتخاب سرویس**: تونل مورد نظر خود را از لیست انتخاب کنید تا وارد **منوی مدیریت تونل** شوید.

#### گزینه‌های منوی مدیریت تونل

  * `1. Start`: سرویس را در صورت غیرفعال بودن، فعال می‌کند.
  * `2. Stop`: سرویس را متوقف می‌کند.
  * `3. Restart`: سرویس را مجدداً راه‌اندازی می‌کند.
  * `4. View Status`: وضعیت دقیق سرویس در `systemd` را نمایش می‌دهد.
  * `5. View Logs (Live)`: لاگ‌های زنده سرویس را نمایش می‌دهد.
  * `6. View Configuration`: محتویات فایل پیکربندی تونل را نشان می‌دهد.
  * `7. Edit Configuration (nano)`: پس از تهیه نسخه پشتیبان، فایل کانفیگ را در ویرایشگر `nano` باز می‌کند.
  * `8. Test Connection`: یک تست اتصال ساده برای عیب‌یابی انجام می‌دهد.
  * `9. Manage Cron Auto-Restart`: منوی تنظیم یا حذف `Cron Job` برای ریستارت خودکار سرویس در بازه‌های زمانی مشخص.
  * `10. Delete Service`: سرویس، فایل کانفیگ، قانون فایروال و کران‌جاب مربوط به آن را برای همیشه حذف می‌کند.
  * `0. Back to Service List`: به منوی لیست سرویس‌ها بازمی‌گردد.

-----

## سازندگان و حامیان

  * **پروژه اصلی Backhaul**: **Musixal**
  * **اسکریپت نصب EasyBackhaul**: **[@N4Xon (NaxonM)](https://github.com/NaxonM/EasyBackhaul)** ([تلگرام](https://t.me/N4Xon))

## لایسنس

پروژه اصلی Backhaul تحت لایسنس AGPL-3.0 منتشر شده است.
